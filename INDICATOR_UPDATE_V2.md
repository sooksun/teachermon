# การอัปเดตตัวชี้วัด V2 (doc_ref6.pdf)

## สรุปการเปลี่ยนแปลง

อัปเดตระบบตัวชี้วัดการเตรียมความพร้อมและพัฒนาอย่างเข้ม (ครูผู้ช่วย) ตามเอกสาร `doc_ref6.pdf`

---

## โครงสร้างตัวชี้วัดใหม่

### 1. ด้านวิชาชีพ (PROFESSIONAL) - 10 รายการ
**ใช้ประเมินทุกครั้ง (ครั้งที่ 1-4)**

#### ส่วนที่ 1: การจัดการเรียนรู้ (7 ข้อ)
| รหัส | ชื่อตัวชี้วัด |
|------|--------------|
| PRO_1.1 | การวิเคราะห์หลักสูตร |
| PRO_1.2 | การออกแบบการจัดการเรียนรู้ |
| PRO_1.3 | การจัดกิจกรรมการเรียนรู้ |
| PRO_1.4 | การเลือกและใช้สื่อ เทคโนโลยี |
| PRO_1.5 | การวัดและประเมินผล |
| PRO_1.6 | การจัดบรรยากาศ |
| PRO_1.7 | การใช้เทคโนโลยีดิจิทัล |

#### ส่วนที่ 2: การส่งเสริมสนับสนุน (3 ข้อ)
| รหัส | ชื่อตัวชี้วัด |
|------|--------------|
| PRO_2.1 | การจัดทำข้อมูลสารสนเทศ |
| PRO_2.2 | ระบบดูแลช่วยเหลือผู้เรียน |
| PRO_2.3 | กฎหมายและระเบียบปฏิบัติ |

---

### 2. ด้านสังคม (SOCIAL) - 2 รายการ
**เริ่มใช้ประเมินครั้งที่ 3-4**

| รหัส | ชื่อตัวชี้วัด |
|------|--------------|
| SOC_1 | การเรียนรู้จากกัลยาณมิตร (Mentor/ครูพี่เลี้ยง) |
| SOC_2 | การเรียนรู้เป็นเครือข่าย (PLC) |

---

### 3. ด้านคุณลักษณะส่วนบุคคล (PERSONAL) - 15 รายการ

#### ส่วนที่ 1: วินัย คุณธรรม จริยธรรม (11 ข้อ) - ประเมินทุกครั้ง

**หมวด: วินัยและการประพฤติตน**
| รหัส | ชื่อตัวชี้วัด |
|------|--------------|
| PER_1.1 | มีวินัยในตนเอง |
| PER_1.2 | ตรงต่อเวลา |
| PER_1.3 | อุทิศเวลาให้แก่ทางราชการและผู้เรียน |
| PER_1.4 | เอาใจใส่ช่วยเหลือผู้เรียน |
| PER_1.5 | รักษาความสามัคคี |

**หมวด: การเสียสละและแบบอย่าง**
| รหัส | ชื่อตัวชี้วัด |
|------|--------------|
| PER_1.6 | ช่วยเหลือ/ร่วมมือแก่ส่วนรวม |
| PER_1.7 | มีส่วนร่วมอนุรักษ์วัฒนธรรมไทยและสิ่งแวดล้อม |
| PER_1.8 | ดำรงชีวิตตามหลักปรัชญาของเศรษฐกิจพอเพียง |
| PER_1.9 | ละเว้นอบายมุขและสิ่งเสพติด |
| PER_1.10 | ประพฤติตนเป็นแบบอย่างที่ดี |
| PER_1.11 | รักษาชื่อเสียง ปกป้องศักดิ์ศรีวิชาชีพ |

#### ส่วนที่ 2: การพัฒนาตนเอง (4 ข้อ) - เน้นครั้งที่ 3-4
| รหัส | ชื่อตัวชี้วัด |
|------|--------------|
| PER_2.1 | ภาษาไทยและอังกฤษ |
| PER_2.2 | เทคโนโลยีดิจิทัล |
| PER_2.3 | การเงิน |
| PER_2.4 | สุขภาพ |

---

## เกณฑ์การผ่านการประเมิน

### ครั้งที่ 1 และ 2
- ด้านวิชาชีพ: ผ่านไม่น้อยกว่า **9 รายการ** (จาก 10)
- ด้านคุณลักษณะส่วนบุคคล: ผ่านไม่น้อยกว่า **7 รายการ** (เฉพาะส่วนวินัยฯ)

### ครั้งที่ 3 และ 4
- ด้านวิชาชีพ: ผ่านไม่น้อยกว่า **11 รายการ**
- ด้านสังคม: ผ่านไม่น้อยกว่า **3 รายการ**
- ด้านคุณลักษณะส่วนบุคคล: ผ่านไม่น้อยกว่า **11 รายการ** (รวมส่วนพัฒนาตนเอง)

---

## ไฟล์ที่อัปเดต

### 1. Prisma Schema
- `packages/database/prisma/schema.prisma`
  - อัปเดต `IndicatorCode` enum (27 ตัวชี้วัด)
  - เพิ่ม `IndicatorAspect` enum
  - เพิ่มฟิลด์ใหม่ใน `Indicator`: `section`, `subSection`, `assessmentRounds`, `minPassCount`
  - เพิ่มฟิลด์ `assessmentRounds` ใน `SubIndicator`
  - สร้างตาราง `IndicatorAssessment` (ผลการประเมินตัวชี้วัด)
  - สร้างตาราง `IndicatorReport` (สรุปรายงานตามหมวดหมู่)

### 2. Migration SQL
- `packages/database/prisma/migrations/20260209100000_update_indicators_v2/migration.sql`

### 3. Seed Script
- `packages/database/prisma/seed-indicators-v2.ts` (ไฟล์ใหม่)

### 4. Constants
- `packages/shared/src/constants/indicators.ts` (ไฟล์ใหม่)
  - โครงสร้างตารางรายงาน `INDICATOR_REPORT_STRUCTURE`
  - เกณฑ์การผ่าน `PASS_CRITERIA`
  - Helper functions สำหรับตรวจสอบตัวชี้วัด

---

## วิธีการติดตั้งบนเซิร์ฟเวอร์

### 1. ดึงโค้ดล่าสุด
```bash
cd /DATA/AppData/www/rukthin
git pull origin main
```

### 2. รัน Migration SQL
```bash
# เข้า MariaDB และรัน migration
mysql -h 192.168.1.4 -u teachermon -p teachermon < packages/database/prisma/migrations/20260209100000_update_indicators_v2/migration.sql
```

### 3. รัน Seed Script (Optional)
```bash
# ใน container หรือ local
cd packages/database
npx ts-node prisma/seed-indicators-v2.ts
```

### 4. Rebuild Docker
```bash
docker compose -f docker-compose.prod.yml --env-file .env.production up -d --build
```

---

## การใช้งาน Constants ใน Code

```typescript
import { 
  INDICATOR_REPORT_STRUCTURE,
  PASS_CRITERIA,
  IndicatorAspect,
  isIndicatorUsedInRound,
  getIndicatorsByAspect 
} from '@teachermon/shared';

// ตรวจสอบว่าตัวชี้วัดใช้ในครั้งที่ 3 หรือไม่
const isUsed = isIndicatorUsedInRound('SOC_1', 3); // true

// ดึงโครงสร้างตัวชี้วัดด้านวิชาชีพ
const professional = getIndicatorsByAspect(IndicatorAspect.PROFESSIONAL);
```

---

## สรุป

| ด้าน | จำนวนตัวชี้วัด | ครั้งที่ใช้ |
|------|---------------|-----------|
| วิชาชีพ | 10 | 1-4 |
| สังคม | 2 | 3-4 |
| คุณลักษณะส่วนบุคคล | 15 | ตามส่วน |
| **รวม** | **27** | - |
