# üß™ ‡∏Ñ‡∏π‡πà‡∏°‡∏∑‡∏≠‡∏Å‡∏≤‡∏£‡∏ó‡∏î‡∏™‡∏≠‡∏ö AI (Evidence & PDPA)

**‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà**: 27 ‡∏°‡∏Å‡∏£‡∏≤‡∏Ñ‡∏° 2569

---

## üìã ‡∏™‡∏£‡∏∏‡∏õ

‡∏Ñ‡∏π‡πà‡∏°‡∏∑‡∏≠‡∏ô‡∏µ‡πâ‡πÉ‡∏ä‡πâ‡∏ó‡∏î‡∏™‡∏≠‡∏ö AI features ‡∏ó‡∏µ‡πà‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏Ç‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ö **Evidence** ‡πÅ‡∏•‡∏∞ **PDPA Scanning**

---

## üîë ‡∏Ç‡πâ‡∏≠‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡πÄ‡∏ö‡∏∑‡πâ‡∏≠‡∏á‡∏ï‡πâ‡∏ô

1. **API Server** ‡∏£‡∏±‡∏ô‡∏ó‡∏µ‡πà `http://localhost:3001`
2. **JWT Token** ‡∏à‡∏≤‡∏Å user ‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå
3. **GEMINI_API_KEY** (‡∏ñ‡πâ‡∏≤‡∏°‡∏µ) - ‡∏ñ‡πâ‡∏≤‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏à‡∏∞‡πÉ‡∏ä‡πâ mock responses
4. **Teacher ID** ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ó‡∏î‡∏™‡∏≠‡∏ö upload evidence

---

## ü§ñ AI Features ‡∏ó‡∏µ‡πà‡∏ó‡∏î‡∏™‡∏≠‡∏ö

### 1. Evidence AI Analysis
- **‡πÄ‡∏°‡∏∑‡πà‡∏≠**: Upload evidence file
- **‡∏ó‡∏≥‡∏≠‡∏∞‡πÑ‡∏£**: 
  - ‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡∏ä‡∏∑‡πà‡∏≠‡πÑ‡∏ü‡∏•‡πå‡πÅ‡∏•‡∏∞‡∏™‡∏£‡πâ‡∏≤‡∏á summary
  - ‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥ keywords, indicators, filename
  - ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Ñ‡∏∏‡∏ì‡∏†‡∏≤‡∏û (quality check)
  - ‡πÉ‡∏´‡πâ‡∏Ñ‡∏≥‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥ (suggestions)

### 2. PDPA Scanner
- **‡πÄ‡∏°‡∏∑‡πà‡∏≠**: Upload evidence ‡∏´‡∏£‡∏∑‡∏≠‡∏™‡∏£‡πâ‡∏≤‡∏á journal
- **‡∏ó‡∏≥‡∏≠‡∏∞‡πÑ‡∏£**:
  - ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ß‡πà‡∏≤‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏≠‡πà‡∏≠‡∏ô‡πÑ‡∏´‡∏ß‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà
  - ‡∏ï‡∏£‡∏ß‡∏à‡∏´‡∏≤: ‡∏ä‡∏∑‡πà‡∏≠‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô, ‡πÄ‡∏•‡∏Ç‡∏ö‡∏±‡∏ï‡∏£‡∏õ‡∏£‡∏∞‡∏ä‡∏≤‡∏ä‡∏ô, ‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£, ‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà, ‡∏≠‡∏µ‡πÄ‡∏°‡∏•
  - ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏™‡∏µ‡πà‡∏¢‡∏á (SAFE, LOW, MEDIUM, HIGH)
  - ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ó‡∏µ‡πà‡∏õ‡∏•‡∏≠‡∏î‡∏†‡∏±‡∏¢ (sanitized text)

---

## üõ†Ô∏è ‡∏ß‡∏¥‡∏ò‡∏µ‡∏ó‡∏î‡∏™‡∏≠‡∏ö

### ‡∏ß‡∏¥‡∏ò‡∏µ‡∏ó‡∏µ‡πà 1: ‡πÉ‡∏ä‡πâ PowerShell Script (‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥)

```powershell
# ‡∏ó‡∏î‡∏™‡∏≠‡∏ö PDPA Scanner
.\scripts\test-ai-pdpa.ps1

# ‡∏ó‡∏î‡∏™‡∏≠‡∏ö Evidence Upload (‡∏û‡∏£‡πâ‡∏≠‡∏° AI)
.\scripts\test-ai-evidence.ps1
```

### ‡∏ß‡∏¥‡∏ò‡∏µ‡∏ó‡∏µ‡πà 2: ‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏ú‡πà‡∏≤‡∏ô API ‡πÇ‡∏î‡∏¢‡∏ï‡∏£‡∏á

#### 1. ‡∏ó‡∏î‡∏™‡∏≠‡∏ö PDPA Scanner (Journal)

```powershell
# Login
$body = @{ email = "admin@teachermon.com"; password = "password123" } | ConvertTo-Json
$r = Invoke-RestMethod -Uri "http://localhost:3001/api/auth/login" -Method Post -Body $body -ContentType "application/json"
$token = $r.access_token

# Test PDPA Check (‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏≠‡πà‡∏≠‡∏ô‡πÑ‡∏´‡∏ß)
$pdpaBody = @{
    text = "‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏ä‡∏∑‡πà‡∏≠ ‡∏™‡∏°‡∏ä‡∏≤‡∏¢ ‡πÉ‡∏à‡∏î‡∏µ ‡πÄ‡∏•‡∏Ç‡∏ö‡∏±‡∏ï‡∏£‡∏õ‡∏£‡∏∞‡∏ä‡∏≤‡∏ä‡∏ô 1234567890123 ‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£ 081-234-5678"
} | ConvertTo-Json

$headers = @{ "Authorization" = "Bearer $token" }
$result = Invoke-RestMethod -Uri "http://localhost:3001/api/journals/ai/check-pdpa" -Method Post -Body $pdpaBody -ContentType "application/json" -Headers $headers
$result | ConvertTo-Json -Depth 10
```

#### 2. ‡∏ó‡∏î‡∏™‡∏≠‡∏ö Evidence Upload (‡∏û‡∏£‡πâ‡∏≠‡∏° AI Analysis)

**‡∏ß‡∏¥‡∏ò‡∏µ‡∏ó‡∏µ‡πà 1: ‡πÉ‡∏ä‡πâ PowerShell Script (‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥)**
```powershell
.\scripts\test-ai-evidence.ps1
```

**‡∏ß‡∏¥‡∏ò‡∏µ‡∏ó‡∏µ‡πà 2: ‡πÉ‡∏ä‡πâ curl (‡∏ñ‡πâ‡∏≤‡∏°‡∏µ)**
```bash
# Login first
TOKEN=$(curl -X POST http://localhost:3001/api/auth/login \
  -H "Content-Type: application/json" \
  -d '{"email":"admin@teachermon.com","password":"password123"}' | jq -r '.access_token')

# Upload file
curl -X POST http://localhost:3001/api/evidence/upload \
  -H "Authorization: Bearer $TOKEN" \
  -F "file=@test-evidence.pdf" \
  -F "evidenceType=LESSON_PLAN" \
  -F "indicatorCodes=1.1" \
  -F "indicatorCodes=1.2" | jq .
```

**‡∏ß‡∏¥‡∏ò‡∏µ‡∏ó‡∏µ‡πà 3: ‡πÉ‡∏ä‡πâ Postman/Insomnia**
- Method: `POST`
- URL: `http://localhost:3001/api/evidence/upload`
- Headers: `Authorization: Bearer <token>`
- Body: `form-data`
  - `file`: (File) ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÑ‡∏ü‡∏•‡πå
  - `evidenceType`: `LESSON_PLAN`
  - `indicatorCodes`: `1.1` (‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏´‡∏•‡∏≤‡∏¢‡∏Ñ‡πà‡∏≤‡πÑ‡∏î‡πâ)
  - `indicatorCodes`: `1.2`

#### 3. ‡∏î‡∏π AI Activities (Admin)

```powershell
$headers = @{ "Authorization" = "Bearer $token" }
$activities = Invoke-RestMethod -Uri "http://localhost:3001/api/ai/admin/activities?limit=10" -Method Get -Headers $headers
$activities | ConvertTo-Json -Depth 10
```

#### 4. ‡∏î‡∏π AI Activities (Admin)

```powershell
$headers = @{ "Authorization" = "Bearer $token" }

# ‡∏î‡∏π activities ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î
$activities = Invoke-RestMethod -Uri "http://localhost:3001/api/ai/admin/activities?limit=10" -Method Get -Headers $headers
$activities | ConvertTo-Json -Depth 10

# ‡∏î‡∏π activities ‡∏Ç‡∏≠‡∏á user
$userId = "user-id-here"
$userActivities = Invoke-RestMethod -Uri "http://localhost:3001/api/ai/admin/activities/user/$userId" -Method Get -Headers $headers
$userActivities | ConvertTo-Json -Depth 10

# ‡∏î‡∏π activities ‡∏ó‡∏µ‡πà‡∏£‡∏≠ review
$pending = Invoke-RestMethod -Uri "http://localhost:3001/api/ai/admin/activities/pending-review" -Method Get -Headers $headers
$pending | ConvertTo-Json -Depth 10

# Review activity
$activityId = "activity-id-here"
$reviewBody = @{
    approved = $true
    notes = "Approved - AI analysis looks good"
} | ConvertTo-Json
$review = Invoke-RestMethod -Uri "http://localhost:3001/api/ai/admin/activities/$activityId/review" -Method Patch -Body $reviewBody -ContentType "application/json" -Headers $headers
$review | ConvertTo-Json -Depth 10

# ‡∏î‡∏π‡∏™‡∏ñ‡∏¥‡∏ï‡∏¥
$stats = Invoke-RestMethod -Uri "http://localhost:3001/api/ai/admin/activities/stats" -Method Get -Headers $headers
$stats | ConvertTo-Json -Depth 10
```

#### 5. ‡∏î‡∏π PDPA Audit History

```powershell
# ‡∏î‡∏π PDPA history ‡∏Ç‡∏≠‡∏á evidence
$evidenceId = "evidence-id-here"
$headers = @{ "Authorization" = "Bearer $token" }
$history = Invoke-RestMethod -Uri "http://localhost:3001/api/ai/admin/pdpa/evidence/$evidenceId" -Method Get -Headers $headers
$history | ConvertTo-Json -Depth 10

# Acknowledge PDPA risk
$auditId = "audit-id-here"
$ack = Invoke-RestMethod -Uri "http://localhost:3001/api/ai/admin/pdpa/$auditId/acknowledge" -Method Patch -Headers $headers
$ack | ConvertTo-Json -Depth 10
```

---

## üì° API Endpoints

### Evidence Upload (‡∏û‡∏£‡πâ‡∏≠‡∏° AI)
- **POST** `/api/evidence/upload`
- **Body**: `multipart/form-data`
  - `file`: File (PDF, DOCX, JPG, etc.)
  - `evidenceType`: string (LESSON_PLAN, ASSESSMENT, etc.)
  - `indicatorCodes`: string[] (optional)
- **Response**: 
  ```json
  {
    "id": "uuid",
    "aiAnalysis": {
      "summary": "...",
      "keywords": ["..."],
      "suggestedIndicators": ["1.1", "1.2"],
      "suggestedFilename": "...",
      "qualityCheck": {...},
      "suggestions": [...]
    },
    "pdpaCheck": {
      "isSafe": false,
      "riskLevel": "HIGH",
      "violations": [...],
      "suggestions": [...]
    }
  }
  ```

### PDPA Check (Journal)
- **POST** `/api/journals/ai/check-pdpa`
- **Body**:
  ```json
  {
    "text": "‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö",
    "sourceId": "optional-id"
  }
  ```
- **Response**:
  ```json
  {
    "isSafe": false,
    "riskLevel": "HIGH",
    "violations": [
      {
        "type": "STUDENT_FULL_NAME",
        "matchedText": "‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏ä‡∏∑‡πà‡∏≠ ‡∏™‡∏°‡∏ä‡∏≤‡∏¢ ‡πÉ‡∏à‡∏î‡∏µ",
        "riskLevel": "HIGH",
        "suggestion": "‡πÉ‡∏ä‡πâ '‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô ‡∏Å.' ‡∏´‡∏£‡∏∑‡∏≠‡∏ä‡∏∑‡πà‡∏≠‡πÄ‡∏•‡πà‡∏ô‡πÅ‡∏ó‡∏ô"
      }
    ],
    "sanitizedText": "...",
    "suggestions": [...]
  }
  ```

### AI Admin Endpoints
- **GET** `/api/ai/admin/activities` - ‡∏î‡∏π AI activities
- **GET** `/api/ai/admin/activities/user/:userId` - ‡∏î‡∏π activities ‡∏Ç‡∏≠‡∏á user
- **GET** `/api/ai/admin/activities/pending-review` - ‡∏î‡∏π activities ‡∏ó‡∏µ‡πà‡∏£‡∏≠ review
- **PATCH** `/api/ai/admin/activities/:activityId/review` - Review activity
- **GET** `/api/ai/admin/activities/stats` - ‡∏™‡∏ñ‡∏¥‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô AI
- **GET** `/api/ai/admin/pdpa/:sourceType/:sourceId` - ‡∏î‡∏π PDPA audit history
- **PATCH** `/api/ai/admin/pdpa/:auditId/acknowledge` - Acknowledge PDPA risk

---

## ‚úÖ Test Checklist

### Evidence AI
- [ ] Upload evidence file ‚Üí ‡πÑ‡∏î‡πâ AI analysis
- [ ] AI ‡∏™‡∏£‡πâ‡∏≤‡∏á summary ‡∏à‡∏≤‡∏Å‡∏ä‡∏∑‡πà‡∏≠‡πÑ‡∏ü‡∏•‡πå
- [ ] AI ‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥ keywords ‡πÅ‡∏•‡∏∞ indicators
- [ ] AI ‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡∏ä‡∏∑‡πà‡∏≠‡πÑ‡∏ü‡∏•‡πå‡∏°‡∏≤‡∏ï‡∏£‡∏ê‡∏≤‡∏ô
- [ ] AI ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Ñ‡∏∏‡∏ì‡∏†‡∏≤‡∏û (quality check)
- [ ] AI ‡πÉ‡∏´‡πâ‡∏Ñ‡∏≥‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥ (suggestions)

### PDPA Scanner
- [ ] Upload evidence ‚Üí ‡∏ï‡∏£‡∏ß‡∏à PDPA ‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥
- [ ] ‡∏™‡∏£‡πâ‡∏≤‡∏á journal ‚Üí ‡∏ï‡∏£‡∏ß‡∏à PDPA ‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥
- [ ] ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏ä‡∏∑‡πà‡∏≠‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô ‚Üí ‡∏ï‡∏£‡∏ß‡∏à‡∏û‡∏ö (HIGH risk)
- [ ] ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ó‡∏µ‡πà‡∏°‡∏µ‡πÄ‡∏•‡∏Ç‡∏ö‡∏±‡∏ï‡∏£‡∏õ‡∏£‡∏∞‡∏ä‡∏≤‡∏ä‡∏ô ‚Üí ‡∏ï‡∏£‡∏ß‡∏à‡∏û‡∏ö (HIGH risk)
- [ ] ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ó‡∏µ‡πà‡∏°‡∏µ‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£ ‚Üí ‡∏ï‡∏£‡∏ß‡∏à‡∏û‡∏ö (MEDIUM risk)
- [ ] ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà ‚Üí ‡∏ï‡∏£‡∏ß‡∏à‡∏û‡∏ö (MEDIUM risk)
- [ ] ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ó‡∏µ‡πà‡∏õ‡∏•‡∏≠‡∏î‡∏†‡∏±‡∏¢ ‚Üí ‡πÑ‡∏°‡πà‡∏û‡∏ö violations (SAFE)
- [ ] ‡∏î‡∏π PDPA audit history
- [ ] Acknowledge PDPA risk

### AI Admin
- [ ] ‡∏î‡∏π AI activities ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î
- [ ] ‡∏î‡∏π AI activities ‡∏Ç‡∏≠‡∏á user
- [ ] ‡∏î‡∏π activities ‡∏ó‡∏µ‡πà‡∏£‡∏≠ review
- [ ] Review ‡πÅ‡∏•‡∏∞‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥/‡∏õ‡∏è‡∏¥‡πÄ‡∏™‡∏ò activity
- [ ] ‡∏î‡∏π‡∏™‡∏ñ‡∏¥‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô AI
- [ ] ‡∏î‡∏π PDPA audit history

---

## üß™ Test Cases

### Test Case 1: PDPA Check - ‡∏ä‡∏∑‡πà‡∏≠‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô

**Input**:
```
"‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏ä‡∏∑‡πà‡∏≠ ‡∏™‡∏°‡∏ä‡∏≤‡∏¢ ‡πÉ‡∏à‡∏î‡∏µ ‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏î‡∏µ‡∏°‡∏≤‡∏Å"
```

**Expected**:
- `isSafe: false`
- `riskLevel: "HIGH"`
- `violations[0].type: "STUDENT_FULL_NAME"`
- `violations[0].suggestion` ‡∏°‡∏µ‡∏Ñ‡∏≥‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡πÉ‡∏´‡πâ‡πÉ‡∏ä‡πâ "‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô ‡∏Å."

### Test Case 2: PDPA Check - ‡πÄ‡∏•‡∏Ç‡∏ö‡∏±‡∏ï‡∏£‡∏õ‡∏£‡∏∞‡∏ä‡∏≤‡∏ä‡∏ô

**Input**:
```
"‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡πÄ‡∏•‡∏Ç‡∏ö‡∏±‡∏ï‡∏£‡∏õ‡∏£‡∏∞‡∏ä‡∏≤‡∏ä‡∏ô 1234567890123"
```

**Expected**:
- `isSafe: false`
- `riskLevel: "HIGH"`
- `violations[0].type: "CITIZEN_ID"`

### Test Case 3: PDPA Check - ‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏õ‡∏•‡∏≠‡∏î‡∏†‡∏±‡∏¢

**Input**:
```
"‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô ‡∏Å. ‡∏°‡∏µ‡∏û‡∏±‡∏í‡∏ô‡∏≤‡∏Å‡∏≤‡∏£‡∏î‡∏µ‡∏Ç‡∏∂‡πâ‡∏ô‡∏°‡∏≤‡∏Å"
```

**Expected**:
- `isSafe: true`
- `riskLevel: "SAFE"`
- `violations: []`

### Test Case 4: Evidence Upload - AI Analysis

**Input**: Upload file ‡∏ä‡∏∑‡πà‡∏≠ `"‡πÅ‡∏ú‡∏ô‡∏Å‡∏≤‡∏£‡∏™‡∏≠‡∏ô_‡∏Ñ‡∏ì‡∏¥‡∏ï‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå_‡∏õ.1_2567.pdf"`

**Expected**:
- `aiAnalysis.summary` ‡∏°‡∏µ‡∏Ñ‡∏≥‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢
- `aiAnalysis.keywords` ‡∏°‡∏µ keywords ‡πÄ‡∏ä‡πà‡∏ô ["‡∏Ñ‡∏ì‡∏¥‡∏ï‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå", "‡∏õ.1", "‡πÅ‡∏ú‡∏ô‡∏Å‡∏≤‡∏£‡∏™‡∏≠‡∏ô"]
- `aiAnalysis.suggestedIndicators` ‡∏°‡∏µ indicators ‡∏ó‡∏µ‡πà‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏Ç‡πâ‡∏≠‡∏á
- `aiAnalysis.suggestedFilename` ‡πÄ‡∏õ‡πá‡∏ô‡∏ä‡∏∑‡πà‡∏≠‡πÑ‡∏ü‡∏•‡πå‡∏°‡∏≤‡∏ï‡∏£‡∏ê‡∏≤‡∏ô

---

## üêõ Troubleshooting

### AI ‡πÑ‡∏°‡πà‡∏ó‡∏≥‡∏á‡∏≤‡∏ô / ‡πÉ‡∏ä‡πâ mock responses
- ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤ `GEMINI_API_KEY` ‡∏ñ‡∏π‡∏Å‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡πÉ‡∏ô `.env`
- ‡∏ñ‡πâ‡∏≤‡πÑ‡∏°‡πà‡∏°‡∏µ API key ‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏∞‡πÉ‡∏ä‡πâ mock responses (fallback)

### PDPA ‡πÑ‡∏°‡πà‡∏ï‡∏£‡∏ß‡∏à‡∏û‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏≠‡πà‡∏≠‡∏ô‡πÑ‡∏´‡∏ß
- ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤ pattern matching ‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á
- ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤ text ‡∏ó‡∏µ‡πà‡∏™‡πà‡∏á‡πÑ‡∏õ‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏≠‡πà‡∏≠‡∏ô‡πÑ‡∏´‡∏ß‡∏à‡∏£‡∏¥‡∏á‡πÜ

### Evidence upload ‡∏•‡πâ‡∏°‡πÄ‡∏´‡∏•‡∏ß
- ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤ `teacherId` ‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á
- ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤ file size ‡πÑ‡∏°‡πà‡πÄ‡∏Å‡∏¥‡∏ô limit
- ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤ file type ‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á

---

## üìö ‡πÑ‡∏ü‡∏•‡πå‡∏ó‡∏µ‡πà‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏Ç‡πâ‡∏≠‡∏á

- `apps/api/src/ai/evidence-ai.service.ts` - Evidence AI service
- `apps/api/src/ai/pdpa-scanner.service.ts` - PDPA Scanner service
- `apps/api/src/evidence/evidence.service.ts` - Evidence service (‡πÉ‡∏ä‡πâ AI)
- `apps/api/src/ai/ai-admin.controller.ts` - AI Admin endpoints
- `apps/api/src/journals/journals.controller.ts` - Journal PDPA check endpoint

---

**‡∏à‡∏±‡∏î‡∏ó‡∏≥‡πÇ‡∏î‡∏¢**: AI Cursor Agent  
**‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà**: 27 ‡∏°‡∏Å‡∏£‡∏≤‡∏Ñ‡∏° 2569
