# üß™ ‡∏Ñ‡∏π‡πà‡∏°‡∏∑‡∏≠‡∏Å‡∏≤‡∏£‡∏ó‡∏î‡∏™‡∏≠‡∏ö Login (4 Roles)

**‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà**: 27 ‡∏°‡∏Å‡∏£‡∏≤‡∏Ñ‡∏° 2569

---

## üìã ‡∏™‡∏£‡∏∏‡∏õ

‡∏Ñ‡∏π‡πà‡∏°‡∏∑‡∏≠‡∏ô‡∏µ‡πâ‡πÅ‡∏™‡∏î‡∏á‡∏ß‡∏¥‡∏ò‡∏µ‡∏ó‡∏î‡∏™‡∏≠‡∏ö Login ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ó‡∏∏‡∏Å role ‡πÉ‡∏ô‡∏£‡∏∞‡∏ö‡∏ö TeacherMon

---

## üîë Roles ‡πÉ‡∏ô‡∏£‡∏∞‡∏ö‡∏ö

‡∏£‡∏∞‡∏ö‡∏ö‡∏°‡∏µ **5 roles** ‡πÅ‡∏ï‡πà‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏´‡∏•‡∏±‡∏Å‡∏à‡∏∞‡πÄ‡∏ô‡πâ‡∏ô **4 roles**:

1. **ADMIN** - ‡∏ú‡∏π‡πâ‡∏î‡∏π‡πÅ‡∏•‡∏£‡∏∞‡∏ö‡∏ö ‚úÖ
2. **PROJECT_MANAGER** - ‡∏ú‡∏π‡πâ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡πÇ‡∏Ñ‡∏£‡∏á‡∏Å‡∏≤‡∏£ ‚úÖ
3. **TEACHER** - ‡∏Ñ‡∏£‡∏π ‚úÖ
4. **PRINCIPAL** - ‡∏ú‡∏π‡πâ‡∏≠‡∏≥‡∏ô‡∏ß‡∏¢‡∏Å‡∏≤‡∏£ ‚ö†Ô∏è (‡∏≠‡∏≤‡∏à‡∏ï‡πâ‡∏≠‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á)
5. **MENTOR** - ‡∏û‡∏µ‡πà‡πÄ‡∏•‡∏µ‡πâ‡∏¢‡∏á ‚ö†Ô∏è (‡∏≠‡∏≤‡∏à‡∏ï‡πâ‡∏≠‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á)

---

## üë• Test Users

### 1. ADMIN
- **Email**: `admin@teachermon.com`
- **Password**: `password123`
- **Role**: `ADMIN`
- **‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå**: ‡πÄ‡∏Ç‡πâ‡∏≤‡∏ñ‡∏∂‡∏á‡πÑ‡∏î‡πâ‡∏ó‡∏∏‡∏Å‡∏≠‡∏¢‡πà‡∏≤‡∏á

### 2. PROJECT_MANAGER
- **Email**: `manager@teachermon.com`
- **Password**: `password123`
- **Role**: `PROJECT_MANAGER`
- **‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå**: ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡πÇ‡∏Ñ‡∏£‡∏á‡∏Å‡∏≤‡∏£, ‡∏î‡∏π‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô, ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Ñ‡∏£‡∏π

### 3. TEACHER
- **Email**: `pimchanok@example.com` (‡∏´‡∏£‡∏∑‡∏≠ email ‡∏Ç‡∏≠‡∏á teacher ‡∏≠‡∏∑‡πà‡∏ô‡πÜ)
- **Password**: `password123`
- **Role**: `TEACHER`
- **‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå**: ‡∏î‡∏π‡πÅ‡∏•‡∏∞‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Ç‡∏≠‡∏á‡∏ï‡∏±‡∏ß‡πÄ‡∏≠‡∏á, ‡∏™‡∏£‡πâ‡∏≤‡∏á journal, evidence

### 4. PRINCIPAL
- **Email**: `principal@teachermon.com`
- **Password**: `password123`
- **Role**: `PRINCIPAL`
- **‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå**: ‡∏î‡∏π‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Ñ‡∏£‡∏π‡πÉ‡∏ô‡πÇ‡∏£‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô, ‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô

### 5. MENTOR
- **Email**: `mentor@teachermon.com`
- **Password**: `password123`
- **Role**: `MENTOR`
- **‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå**: ‡∏î‡∏π‡πÅ‡∏•‡∏∞‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Ñ‡∏£‡∏π‡∏ó‡∏µ‡πà‡∏£‡∏±‡∏ö‡∏ú‡∏¥‡∏î‡∏ä‡∏≠‡∏ö, ‡∏™‡∏£‡πâ‡∏≤‡∏á mentoring visit

---

## üõ†Ô∏è ‡∏ß‡∏¥‡∏ò‡∏µ‡∏ó‡∏î‡∏™‡∏≠‡∏ö

### ‡∏ß‡∏¥‡∏ò‡∏µ‡∏ó‡∏µ‡πà 1: ‡πÉ‡∏ä‡πâ PowerShell Script (‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥)

```powershell
# ‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏ó‡∏∏‡∏Å role
.\scripts\test-login.ps1

# ‡∏ó‡∏î‡∏™‡∏≠‡∏ö role ‡πÄ‡∏î‡∏µ‡∏¢‡∏ß
.\scripts\test-login.ps1 -Action admin
.\scripts\test-login.ps1 -Action manager
.\scripts\test-login.ps1 -Action teacher
.\scripts\test-login.ps1 -Action principal
.\scripts\test-login.ps1 -Action mentor
```

### ‡∏ß‡∏¥‡∏ò‡∏µ‡∏ó‡∏µ‡πà 2: ‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏ú‡πà‡∏≤‡∏ô Browser

1. ‡πÄ‡∏õ‡∏¥‡∏î `http://localhost:3000/login`
2. ‡πÉ‡∏™‡πà email ‡πÅ‡∏•‡∏∞ password ‡∏ï‡∏≤‡∏° test users
3. ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤ login ‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à‡πÅ‡∏•‡∏∞ redirect ‡πÑ‡∏õ‡∏ó‡∏µ‡πà `/dashboard`
4. ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö role ‡πÉ‡∏ô profile

### ‡∏ß‡∏¥‡∏ò‡∏µ‡∏ó‡∏µ‡πà 3: ‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏ú‡πà‡∏≤‡∏ô API ‡πÇ‡∏î‡∏¢‡∏ï‡∏£‡∏á

#### PowerShell:
```powershell
# Login
$body = @{
    email = "admin@teachermon.com"
    password = "password123"
} | ConvertTo-Json

$response = Invoke-RestMethod -Uri "http://localhost:3001/api/auth/login" -Method Post -Body $body -ContentType "application/json"
$token = $response.access_token

# Test Profile
$headers = @{
    "Authorization" = "Bearer $token"
}
$profile = Invoke-RestMethod -Uri "http://localhost:3001/api/auth/profile" -Method Get -Headers $headers
$profile | ConvertTo-Json
```

#### cURL:
```bash
# Login
curl -X POST http://localhost:3001/api/auth/login \
  -H "Content-Type: application/json" \
  -d '{"email":"admin@teachermon.com","password":"password123"}' | jq .

# Get Profile
TOKEN="your-token-here"
curl -X GET http://localhost:3001/api/auth/profile \
  -H "Authorization: Bearer $TOKEN" | jq .
```

---

## ‚úÖ Test Checklist

### ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÅ‡∏ï‡πà‡∏•‡∏∞ Role:

- [ ] Login ‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à
- [ ] ‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö JWT token
- [ ] Token ‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á (‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÉ‡∏ä‡πâ‡πÄ‡∏£‡∏µ‡∏¢‡∏Å API ‡πÑ‡∏î‡πâ)
- [ ] Profile API ‡∏ó‡∏≥‡∏á‡∏≤‡∏ô (GET /api/auth/profile)
- [ ] Role ‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á
- [ ] Redirect ‡πÑ‡∏õ‡∏ó‡∏µ‡πà dashboard ‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á
- [ ] UI ‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ï‡∏≤‡∏° role

### Edge Cases:

- [ ] Login ‡∏î‡πâ‡∏ß‡∏¢ email ‡∏ó‡∏µ‡πà‡πÑ‡∏°‡πà‡∏°‡∏µ‡πÉ‡∏ô‡∏£‡∏∞‡∏ö‡∏ö ‚Üí ‡∏Ñ‡∏ß‡∏£‡πÑ‡∏î‡πâ error
- [ ] Login ‡∏î‡πâ‡∏ß‡∏¢ password ‡∏ú‡∏¥‡∏î ‚Üí ‡∏Ñ‡∏ß‡∏£‡πÑ‡∏î‡πâ error
- [ ] Login ‡∏î‡πâ‡∏ß‡∏¢ user ‡∏ó‡∏µ‡πà isActive = false ‚Üí ‡∏Ñ‡∏ß‡∏£‡πÑ‡∏î‡πâ error
- [ ] Login ‡πÅ‡∏•‡πâ‡∏ß token ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡πÑ‡∏î‡πâ
- [ ] Login ‡πÅ‡∏•‡πâ‡∏ß lastLogin ‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ï

---

## üîç ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå

### 1. Response ‡∏à‡∏≤‡∏Å Login API

```json
{
  "access_token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...",
  "user": {
    "id": "uuid",
    "email": "admin@teachermon.com",
    "role": "ADMIN",
    "fullName": "‡∏ú‡∏π‡πâ‡∏î‡∏π‡πÅ‡∏•‡∏£‡∏∞‡∏ö‡∏ö",
    "teacherId": null
  }
}
```

### 2. Profile API Response

```json
{
  "id": "uuid",
  "email": "admin@teachermon.com",
  "role": "ADMIN",
  "fullName": "‡∏ú‡∏π‡πâ‡∏î‡∏π‡πÅ‡∏•‡∏£‡∏∞‡∏ö‡∏ö",
  "teacherId": null,
  "isActive": true,
  "lastLogin": "2026-01-27T06:00:00.000Z",
  "createdAt": "2026-01-26T00:00:00.000Z",
  "teacher": null
}
```

---

## üêõ Troubleshooting

### Error: Invalid credentials
- ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤ email ‡πÅ‡∏•‡∏∞ password ‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á
- ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤ user ‡∏°‡∏µ `isActive = true`
- ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤ password ‡∏ñ‡∏π‡∏Å hash ‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á

### Error: Email already registered
- User ‡∏ô‡∏µ‡πâ‡∏°‡∏µ‡∏≠‡∏¢‡∏π‡πà‡πÅ‡∏•‡πâ‡∏ß‡πÉ‡∏ô‡∏£‡∏∞‡∏ö‡∏ö
- ‡πÉ‡∏ä‡πâ email ‡∏≠‡∏∑‡πà‡∏ô‡∏´‡∏£‡∏∑‡∏≠‡∏•‡∏ö user ‡πÄ‡∏Å‡πà‡∏≤‡∏Å‡πà‡∏≠‡∏ô

### Error: Connection refused
- ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤ API server ‡∏£‡∏±‡∏ô‡∏≠‡∏¢‡∏π‡πà‡∏ó‡∏µ‡πà `http://localhost:3001`
- ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤ port ‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á

### Token ‡πÑ‡∏°‡πà‡∏ó‡∏≥‡∏á‡∏≤‡∏ô
- ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤ token ‡∏ñ‡∏π‡∏Å‡∏™‡πà‡∏á‡πÉ‡∏ô header: `Authorization: Bearer <token>`
- ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤ token ‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏´‡∏°‡∏î‡∏≠‡∏≤‡∏¢‡∏∏
- ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤ JWT_SECRET ‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á

---

## üìù ‡∏™‡∏£‡πâ‡∏≤‡∏á Test Users

### ‡∏ß‡∏¥‡∏ò‡∏µ‡∏ó‡∏µ‡πà 1: ‡πÉ‡∏ä‡πâ PowerShell Script (‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥)

```powershell
# ‡∏™‡∏£‡πâ‡∏≤‡∏á test users ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ó‡∏∏‡∏Å role
.\scripts\create-test-users.ps1
```

### ‡∏ß‡∏¥‡∏ò‡∏µ‡∏ó‡∏µ‡πà 2: ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ú‡πà‡∏≤‡∏ô API ‡πÇ‡∏î‡∏¢‡∏ï‡∏£‡∏á

‡∏ñ‡πâ‡∏≤‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ test users ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ö‡∏≤‡∏á role ‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÑ‡∏î‡πâ‡∏ú‡πà‡∏≤‡∏ô API:

```powershell
# Register PRINCIPAL
$body = @{
    email = "principal@teachermon.com"
    password = "password123"
    role = "PRINCIPAL"
    fullName = "‡∏ú‡∏π‡πâ‡∏≠‡∏≥‡∏ô‡∏ß‡∏¢‡∏Å‡∏≤‡∏£‡πÇ‡∏£‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô"
} | ConvertTo-Json

Invoke-RestMethod -Uri "http://localhost:3001/api/auth/register" -Method Post -Body $body -ContentType "application/json"

# Register MENTOR
$body = @{
    email = "mentor@teachermon.com"
    password = "password123"
    role = "MENTOR"
    fullName = "‡∏û‡∏µ‡πà‡πÄ‡∏•‡∏µ‡πâ‡∏¢‡∏á‡∏Ñ‡∏£‡∏π"
} | ConvertTo-Json

Invoke-RestMethod -Uri "http://localhost:3001/api/auth/register" -Method Post -Body $body -ContentType "application/json"
```

---

## üìö ‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°

- `apps/api/src/auth/auth.service.ts` - Authentication service
- `apps/api/src/auth/auth.controller.ts` - Authentication endpoints
- `apps/web/app/login/page.tsx` - Login page

---

**‡∏à‡∏±‡∏î‡∏ó‡∏≥‡πÇ‡∏î‡∏¢**: AI Cursor Agent  
**‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà**: 27 ‡∏°‡∏Å‡∏£‡∏≤‡∏Ñ‡∏° 2569
